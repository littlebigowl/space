window.addEventListener("DOMContentLoaded",function(){function e(){H.style.left=U+"px"}function t(){H.style.top=W+"px"}function n(){I=!0,S&&(S=!1,T=!1,f(),y(),g(),h(),ie=1500,le=5e3,z=3,q=3,J=8,Z=1,document.getElementById("infoText").innerText="LEVEL "+Z,H.style.display="block",Q=0,w(),Y=100,E(),me=window.innerWidth,ce=window.innerHeight,U=(me-re)/2,W=ce-100,e(),t()),N=setInterval(function(){B(),T&&(clearInterval(N),document.getElementById("continueButton").style.display="none",V.style.display="block",document.getElementById("infoText").innerText="GAME OVER"),C(),a(),d(),m(),u(),oe<=0&&(l(),oe=le),oe-=1e3/b,se<=0&&(s(),se=ie),se-=1e3/b,de>0&&(de-=1e3/b),(pe.isDown(37)||pe.isDown(65))&&i("left"),(pe.isDown(38)||pe.isDown(87))&&i("up"),(pe.isDown(39)||pe.isDown(68))&&i("right"),(pe.isDown(40)||pe.isDown(83))&&i("down"),pe.isDown(27)&&(I=!1,V.style.display="block",clearInterval(N)),ue.isPressed&&ne<=0&&(o(),ne=1e3),ne>0&&(ne-=1e3/b*5)},1e3/b)}function o(){let e=document.createElement("img");e.setAttribute("src","images/laserShot.png"),e.className="laserShot",document.body.appendChild(e);let t=U+re/2-e.width/2,n=W-e.height;e.style.top=n+"px",e.style.left=t+"px",A&&v()}function l(){let e=document.createElement("img"),t=Math.floor(20*Math.random())+1;e.setAttribute("src","images/planets/planet"+t+".png"),e.className="planet destroyObject";let n=Math.floor(51*Math.random())+100;e.height=n,document.body.appendChild(e);let o=e.width;0==o&&(o=e.height),console.log(o);let l=0-e.height-50,s=0,i=!0;for(;i;)((s=Math.floor(Math.random()*(me-o)))+o<ee||s>te)&&(i=!1);e.style.top=l+"px",e.style.left=s+"px",_=($=s)+e.height}function s(){let e=document.createElement("img"),t=Math.floor(6*Math.random())+1;e.setAttribute("src","images/enemy/enemy"+t+".png"),e.className="enemy destroyObject",document.body.appendChild(e);let n=0-e.height-30,o=0,l=!0;for(;l;)((o=Math.floor(Math.random()*(me-50)))+100<$||o>_)&&(l=!1);e.style.top=n+"px",e.style.left=o+"px",ee=o,te=o+100}function i(n){switch(n){case"left":U-G>0?U-=G:U=0,e();break;case"right":U+re+G<me?U+=G:U=me-re,e();break;case"up":W-G>0?W-=G:W=0,t();break;case"down":W+ae+G<ce?W+=G:W=ce-ae,t()}}function d(){let e=document.getElementsByClassName("planet");if(e.length>0)for(let t=0;t<e.length;t++){let n=e[t].offsetTop;n+=q,e[t].style.top=n+"px",n>ce+100&&e[t].parentNode.removeChild(e[t])}}function a(){let e=document.getElementsByClassName("laserShot"),t=document.getElementsByClassName("destroyObject");if(e.length>0)for(let n=0;n<e.length;n++){let o=e[n].offsetTop;o-=R,e[n].style.top=o+"px";let l=e[n].offsetLeft+e[n].width/2;if(t.length>0)for(let s=0;s<t.length;s++){let i=t[s].offsetTop+t[s].height,d=t[s].offsetTop,a=t[s].offsetLeft,m=t[s].offsetLeft+t[s].width;l>a&&l<m&&o<i&&o>d&&(e[n].parentNode.removeChild(e[n]),t[s].classList.contains("enemy")&&(r(t[s]),Q+=Math.floor(90*Math.random())+10,w()))}o<-100&&e[n].parentNode.removeChild(e[n])}}function r(e){let t=1;A&&L();let n=e.offsetLeft,o=e.offsetTop,l=e.width;e.className="enemy";let s=setInterval(function(){t>8&&(e.parentNode.removeChild(e),clearInterval(s)),t<=8&&(e.setAttribute("src","images/explosion/explosion"+t+".png"),e.width=2*l,e.style.left=n-l/2+"px",e.style.top=o+25+"px",t++)},50)}function m(){let e=document.getElementsByClassName("enemy destroyObject");if(e.length>0)for(let t=0;t<e.length;t++){let n=e[t].offsetTop;n+=z,e[t].style.top=n+"px";let o=e[t].offsetLeft,l=o+e[t].width,s=U+re/2;s>o&&s<l&&de<=0&&n<W&&(c(e[t]),de=400),n>ce+100&&e[t].parentNode.removeChild(e[t])}}function c(e){let t=document.createElement("img");t.setAttribute("src","images/enemy/enemyLaserShot.png"),t.className="enemyLaserShot",document.body.appendChild(t);let n=e.offsetLeft+e.width/2-t.width/2,o=e.offsetTop+e.height;t.style.top=o+"px",t.style.left=n+"px",A&&v()}function u(){let e=document.getElementsByClassName("enemyLaserShot");if(e.length>0)for(let t=0;t<e.length;t++){let n=e[t].offsetTop;n+=J,e[t].style.top=n+"px";let o=e[t].offsetLeft+e[t].width/2;if(o>U&&o<U+re&&n>W&&n<W+ae){if(e[t].parentNode.removeChild(e[t]),Y-X>0){let e=Math.floor(6*Math.random())+5;Y-=e,p()}else Y=0,x();E()}n>ce+100&&e[t].parentNode.removeChild(e[t])}}function p(){H.setAttribute("src","images/spaceShipShield.png");setTimeout(function(){H.setAttribute("src","images/spaceShip.png")},200)}function f(){let e=document.getElementsByClassName("laserShot");e.length>0&&(e[0].parentNode.removeChild(e[0]),f())}function h(){let e=document.getElementsByClassName("enemyLaserShot");e.length>0&&(e[0].parentNode.removeChild(e[0]),h())}function y(){let e=document.getElementsByClassName("planet");e.length>0&&(e[0].parentNode.removeChild(e[0]),y())}function g(){let e=document.getElementsByClassName("enemy");e.length>0&&(e[0].parentNode.removeChild(e[0]),g())}function w(){document.getElementById("score").innerText=Q}function E(){let e=document.getElementById("shieldText");document.getElementById("shield").innerText=Y,e.style.color=Y<26?"red":"#FFD700"}function x(){T=!0,Y=0,E(),A&&L();let e=1;H.style.display="none";let t=document.createElement("img");t.style.position="absolute",document.body.appendChild(t);let n=U,o=W,l=re,s=setInterval(function(){e>8&&(t.parentNode.removeChild(t),clearInterval(s)),e<=8&&(t.setAttribute("src","images/explosion/explosion"+e+".png"),t.width=2*l,t.style.left=n-l/2+"px",t.style.top=o+25+"px",e++)},50)}function B(){let e=document.getElementsByClassName("destroyObject");if(e.length>0)for(let t=0;t<e.length;t++){let n=e[t].offsetLeft,o=n+e[t].width,l=e[t].offsetTop,s=l+e[t].height,i=U+re,d=W+ae,a=U>n&&U<o&&W>l&&W<s,m=i>n&&i<o&&W>l&&W<s,c=U>n&&U<o&&d>l&&d<s,u=i>n&&i<o&&W>l&&W<s;(a||m||c||u)&&(x(),e[t].classList.contains("enemy")&&r(e[t]))}}function C(){let e=Math.floor(Q/1e3)+1;e>Z&&(Z=e,z++,q++,J+=2,document.getElementById("infoText").innerText="LEVEL "+Z,se-100>=300&&(ie-=200,le-=500))}function v(){k>=M.length&&(k=0),M[k].play(),k++}function L(){K>=D.length&&(K=0),D[K].play(),K++}let N,b=50,I=!1,S=!0,T=!1,A=!0,M=[new Audio("sound/laserShot.mp3"),new Audio("sound/laserShot.mp3"),new Audio("sound/laserShot.mp3"),new Audio("sound/laserShot.mp3")],k=0,D=[new Audio("sound/explosionShort.mp3"),new Audio("sound/explosionShort.mp3"),new Audio("sound/explosionShort.mp3"),new Audio("sound/explosionShort.mp3")],K=0,O=document.getElementById("soundButton"),j=document.getElementById("startButton"),F=document.getElementById("continueButton"),P=document.getElementById("resetButton"),V=document.getElementById("buttonContainer"),H=document.getElementById("mainSpaceShip"),U=0,W=0,G=10,R=15,q=3,z=3,J=8,Q=0,X=5,Y=100,Z=1,$=0,_=0,ee=0,te=0,ne=0,oe=0,le=5e3,se=0,ie=1500,de=0,ae=H.height,re=H.width,me=window.innerWidth,ce=window.innerHeight;j.addEventListener("click",function(){j.style.display="none",P.style.display="inline",F.style.display="inline",V.style.display="none",H.style.display="block",n()}),P.addEventListener("click",function(){S=!0,T=!1,document.getElementById("continueButton").style.display="inline",V.style.display="none",n()}),F.addEventListener("click",function(){V.style.display="none",n()}),O.addEventListener("click",function(){A?(A=!1,document.getElementById("soundStatus").innerText="OFF"):(A=!0,document.getElementById("soundStatus").innerText="ON")}),window.addEventListener("mousedown",function(){ue.isPressed=!0}),window.addEventListener("mouseup",function(){ue.isPressed=!1});let ue={isPressed:!1};window.addEventListener("keydown",function(e){pe.onKeyDown(e)}),window.addEventListener("keyup",function(e){pe.onKeyUp(e)});let pe={pressedKey:[0],isDown:function(e){return!!this.pressedKey.includes(e)},onKeyDown:function(e){this.pressedKey.includes(e.keyCode)||this.pressedKey.push(e.keyCode)},onKeyUp:function(e){let t=this.pressedKey.indexOf(e.keyCode);t>-1&&this.pressedKey.splice(t,1)}}});